<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2018-04-25 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Dan T. Tran
dantran@gmail.com" />
    <meta name="Date-Revision-yyyymmdd" content="20180425" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Native Maven Plugin &#x2013; Maven 2 Native Plugin</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/mojohaus/mojo-parent">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../../../" id="bannerLeft">
                                                                                                <img src="../../../../images/mojo_logo.png"  alt="MojoHaus"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../../" title="MojoHaus">
        MojoHaus</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../../../mojo-parent" title="MojoHaus Parent">
        MojoHaus Parent</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../" title="Maven Native">
        Maven Native</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../" title="Native Maven Plugin">
        Native Maven Plugin</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Maven 2 Native Plugin</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-04-25</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 1.0-alpha-9-SNAPSHOT
        </li>
            
                                    
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="../index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="../usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                
      <li>
  
                          <a href="../howto.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="../lifecycle.html" title="Build Lifecycle">
          <span class="none"></span>
        Build Lifecycle</a>
            </li>
                
      <li>
  
                          <a href="../providers.html" title="Providers">
          <span class="none"></span>
        Providers</a>
            </li>
                
      <li>
  
                          <a href="../envfactory.html" title="Environments">
          <span class="none"></span>
        Environments</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>jni-dll</a>
          </li>
                
      <li>
  
                          <a href="../examples/static-lib-ranlib.html" title="ar-ranlib">
          <span class="none"></span>
        ar-ranlib</a>
            </li>
                
      <li>
  
                          <a href="../examples/share-lib.html" title="share-lib">
          <span class="none"></span>
        share-lib</a>
            </li>
                
      <li>
  
                          <a href="../examples/gcj.html" title="gcj">
          <span class="none"></span>
        gcj</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="www.mojohaus.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Build_a_MSVC_DLL_with_JNI_headers_generated_by_javah"></a>Build a MSVC DLL with JNI headers generated by javah</h2>
<p>The example uses javah to generate native header files which are then be part of the native build to create a Windows DLL</p>
<p>Note:</p>
<ul>
<li>User is responsible to provide all neccessary compiler and linker options</li>
<li>envFactoryName is used to set up compiler and linker specific environments. This feature is extremely useful when you need to use various compilers in your build system and it is impossible to set up single global environment to accomodate all compilers.</li>
<li>Checkout real examples in <a class="externalLink" href="http://svn.codehaus.org/mojo/trunk/mojo/maven-native/native-maven-plugin/src/it/">svn</a></li></ul>
<div>
<pre>&lt;project&gt;
   ...
   &lt;packaging&gt;dll&lt;/packaging&gt;
   
   &lt;dependencies&gt;
     &lt;dependency&gt;
       your jar which has jni interface.
     &lt;/dependency&gt;
     &lt;dependency&gt;
       other native library ( .lib, .so, .a, .o, etc)
       to be linked in.
     &lt;/dependency&gt;
     ...
   &lt;/dependencies&gt;
   
   ...

   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;

           &lt;!-- trigger javah execution --&gt;         
           &lt;javahClassNames&gt;
             &lt;javahClassName&gt;class1&lt;/javahClassName&gt;
             &lt;javahClassName&gt;class2&lt;/javahClassName&gt;              
             &lt;javahClassName&gt;...&lt;/javahClassName&gt;
           &lt;/javahClassNames&gt;
           &lt;!-- enable additional javah interface in dependencies list --&gt;
           &lt;javahSearchJNIFromDependencies&gt;true&lt;/javahSearchJNIFromDependencies&gt;
           &lt;!-- 
            | Add jdk include directories to system include path
            | Override ${jkdIncludePath} If your jdk does not conform to Sun JDK layout
            --&gt;
           &lt;javahOS&gt;win32&lt;/javahOS&gt;

           &lt;!-- setup compiler and linker environment according to msvc 6 vcvars32.bat --&gt;
           &lt;!-- without this setting, you will need to setup the environment outside   --&gt;
           &lt;!-- of Maven                                                               --&gt;
           &lt;envFactoryName&gt;org.codehaus.mojo.natives.msvc.MSVC6EnvFactory&lt;/envFactoryName&gt;
         
           &lt;compilerProvider&gt;msvc&lt;/compilerProvider&gt;
           
           &lt;compilerStartOptions&gt;
             &lt;compilerStartOption&gt; /MD /W4 -O&lt;/compilerStartOption&gt;
             &lt;compilerStartOption&gt;-D_WIN32_WINNT=0x0500 &lt;/compilerStartOption&gt;
           &lt;/compilerStartOptions&gt;
          
           &lt;sources&gt;
             &lt;source&gt;
               &lt;-- relative to your project directory --&gt;
               &lt;directory&gt;../src/main/native&lt;/directory&gt;
               &lt;fileNames&gt;
                 &lt;fileName&gt;file1.c&lt;/fileName&gt;
                 &lt;fileName&gt;file2.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;
             &lt;source&gt;
               &lt;directory&gt;src/main/native&lt;/directory&gt; 
               &lt;fileNames&gt;
                 &lt;fileName&gt;file3.c&lt;/fileName&gt;
                 &lt;fileName&gt;file4.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;          
            
             &lt;!-- additional include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
             &lt;/source&gt;          

             &lt;!-- additional system include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;dependencyAnalysisParticipation&gt;false&lt;/dependencyAnalysisParticipation&gt;
             &lt;/source&gt;          
           &lt;/sources&gt;

           &lt;!-- deploy the accompany .lib file as well --&gt;          
           &lt;linkerSecondaryOutputExtensions&gt;lib&lt;/linkerSecondaryOutputExtensions &gt;
          
           &lt;linkerStartOptions&gt;
             &lt;linkerStartOption&gt; /INCREMENTAL:NO /DLL user32.lib advapi32.lib oldnames.lib kernel32.lib &lt;/linkerStartOption&gt;
           &lt;/linkerStartOptions&gt;
         &lt;/configuration&gt;
        
    &lt;/build&gt;
    
    
&lt;/project&gt;</pre></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2005&#x2013;2018
                        <a href="http://www.mojohaus.org">MojoHaus</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="https://www.ohloh.net/p/5211/widgets/project_thin_badge.js"></script>
    </div>
        </div>
    </footer>
        </body>
</html>