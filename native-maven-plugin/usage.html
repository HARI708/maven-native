<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2018-04-26 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Dan T. Tran
dantran@gmail.com" />
    <meta name="Date-Revision-yyyymmdd" content="20180426" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Native Maven Plugin &#x2013; Native Maven Plugin: Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/mojohaus/mojo-parent">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../../" id="bannerLeft">
                                                                                                <img src="../../../images/mojo_logo.png"  alt="MojoHaus"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../" title="MojoHaus">
        MojoHaus</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../../mojo-parent" title="MojoHaus Parent">
        MojoHaus Parent</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../" title="Maven Native">
        Maven Native</a>
                    <span class="divider">/</span>
      </li>
                <li class="">
                    <a href="./" title="Native Maven Plugin">
        Native Maven Plugin</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Native Maven Plugin: Usage</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-04-26</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 1.0-alpha-9
        </li>
            
                                    
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Usage</a>
          </li>
                
      <li>
  
                          <a href="howto.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="lifecycle.html" title="Build Lifecycle">
          <span class="none"></span>
        Build Lifecycle</a>
            </li>
                
      <li>
  
                          <a href="providers.html" title="Providers">
          <span class="none"></span>
        Providers</a>
            </li>
                
      <li>
  
                          <a href="envfactory.html" title="Environments">
          <span class="none"></span>
        Environments</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li>
  
                          <a href="examples/jni-dll.html" title="jni-dll">
          <span class="none"></span>
        jni-dll</a>
            </li>
                
      <li>
  
                          <a href="examples/static-lib-ranlib.html" title="ar-ranlib">
          <span class="none"></span>
        ar-ranlib</a>
            </li>
                
      <li>
  
                          <a href="examples/share-lib.html" title="share-lib">
          <span class="none"></span>
        share-lib</a>
            </li>
                
      <li>
  
                          <a href="examples/gcj.html" title="gcj">
          <span class="none"></span>
        gcj</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="www.mojohaus.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Usage"></a>Usage</h2>
<p>The following contains summary of all available goals in native-maven-plugin. They work together in a Maven custom build lifecycle</p>
<ul>
<li>Determine your packaging type </li>
<li>Determine your linker dependencies</li>
<li>Determine your include paths and source files</li>
<li>Determine your compiler and linker providers</li>
<li>Determine your compiler and linker arguments </li></ul>
<div class="section">
<h3><a name="Packaging_Type"></a>Packaging Type</h3>
<p>Native plugin supports the following packaging types:</p>
<ul>
<li>dll</li>
<li>exe</li>
<li>lib</li>
<li>a</li>
<li>o</li>
<li>so</li>
<li>sl</li>
<li>dylib</li>
<li>jnilib</li>
<li>uexe</li></ul>
<p>One of these packaging types will go into the your pom.xml's packaging element.</p>
<p>The native build lifecyle uses packaging type as the extension of the build artifact( ie dll, exe, lib, etc ). However, it has minimal knowledge to build each specific extension. You must configure appropriate compiler/linker options at build phase.</p>
<p>&quot;uexe&quot; is a place holder for executable without extension name usually found on UNIX environment. The final artifact will have extension of &quot;uexe&quot;. </p>
<p>Since this plugin uses its own lifecycle, you need to enable plugin's <i>extensions</i> to true</p>
<p>Here is example of declaring your packaging type and plugin header</p>
<div>
<pre>  
  &lt;project&gt;
   ...
   &lt;packaging&gt;so&lt;/packaging&gt;
   ...
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
            ...
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;</pre></div></div>
<div class="section">
<h3><a name="Dependencies"></a>Dependencies</h3>
<ul>
<li>Dependencies with type <i>lib</i>, <i>so</i> and <i>a</i>, <i>sl</i>, <i>jnilib</i>, <i>dylib</i> <i>o</i>, and <i>obj</i> will be linked to final artifact at link step.</li>
<li>Dependencies with type <i>inczip</i> are unpacked to be part of system include path at compile time.</li>
<li>You can explicitly add linker dependencies through normal linker option.</li></ul>
<p>Internally, this plugin copies all dependencies to ${project.build.directory}/lib without the version tag. </p>
<p>The following example shows 2 .so dependency files, and other files in linker option to be linked to the final output file.</p>
<div>
<pre>  
  &lt;project&gt;
   ...
   &lt;dependencies&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;/version&gt;
       &lt;type&gt;so&lt;/type&gt;
     &lt;/dependency&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId2&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;version&gt;
       &lt;type&gt;so&lt;/type&gt;
     &lt;/dependency&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId2&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;version&gt;
       &lt;type&gt;inczip&lt;/type&gt;
     &lt;/dependency&gt;
   &lt;/dependencies&gt;
   
   &lt;build&gt;
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
           ....
           &lt;linkerStartOptions&gt;
             &lt;linkerStartOption&gt;-shared -lxml2 -lz -lpthread -ldl&lt;/linkerStartOption&gt; 
           &lt;/linkerStartOptions&gt;
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;
    </pre></div></div>
<div class="section">
<h3><a name="Include_paths_and_source_files"></a>Include paths and source files </h3>
<p>Include paths and source files are configured using <i>Source</i> configuration. The following example shows a set of compilable source files consist of:</p>
<ul>
<li>All <i>.cpp</i> files, <i>file1.c</i>, and <i>file2.c</i> under <i>${basedir}/../src/main/native</i> directory excluding <i>somefile.cpp</i></li>
<li><i>file3.c</i> and <i>file4.c</i> under ${basedir}/src/main/native&gt;</li></ul>
<p>Include paths consist of all &lt;<a name="directory">directory</a>&gt; under &lt;<a name="sources">sources</a>&gt;</p>
<div>
<pre>
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
           .....
           &lt;sources&gt;
             &lt;source&gt;
               &lt;-- relative to your project directory --&gt;
               &lt;directory&gt;../src/main/native&lt;/directory&gt;
               &lt;!-- ant base wild card files&gt;
               &lt;includes&gt;
                 &lt;include&gt;**/*.cpp&lt;/include&gt;
               &lt;/includes&gt;
               &lt;excludes&gt;
                 &lt;exclude&gt;somefile.cpp&lt;/exclude&gt;
               &lt;/excludes&gt;
               &lt;fileNames&gt;
                 &lt;fileName&gt;file1.c&lt;/fileName&gt;
                 &lt;fileName&gt;file2.c&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;
             &lt;source&gt;
               &lt;directory&gt;src/main/native&lt;/directory&gt; 
               &lt;fileNames&gt;
                 &lt;fileName&gt;file3.c&lt;/fileName&gt;
                 &lt;fileName&gt;file4.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;          
            
             &lt;!-- additional include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;!-- use this to have maven deploying header files with a .inzip type --&gt;
               &lt;!-- typically used to for library artifacts header files ---&gt;
               &lt;deployable&gt;true&lt;/deployable&gt;
             &lt;/source&gt;          

             &lt;!-- additional system include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;dependencyAnalysisParticipation&gt;false&lt;/dependencyAnalysisParticipation&gt;
             &lt;/source&gt;          
           &lt;/sources&gt;
           ....         
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;</pre></div></div>
<div class="section">
<h3><a name="CompilerLinker_Provider"></a>Compiler/Linker Provider</h3>
<p>If you are on a UNIX system, use the default <i>generic</i>, or <i>generic-classic</i> but overwrite <i>compilerExecutable</i> and <i>linkerExecutable</i> configuration specific to your build. Default values for both generic compiler and linker are &quot;gcc&quot;. Ensure the executables are on your path.</p>
<p>On Windows, use Windows supported compiler and linker such as &quot;msvc&quot; and &quot;bcc&quot;</p>
<p>Each provided compiler/linker provider assumes minimal knowledge of available options. The following contains a list of options that will be automatically injected to final command lines:</p>
<ul>
<li>/c for all compilers</li>
<li>Output options such as &quot;-o&quot; for generic compiler/linker, &quot;-Fo&quot; for msvc compiler, and &quot;/out:&quot; msvc linker, etc. </li></ul>
<p>Other notes:</p>
<ul>
<li>Javah goal is invoked automatically at <i>generate-sources</i> phase for all shared library ( dll, so, etc ). See example for details. However, it is skipped when there is no <i>javahClassNames</i> available. </li>
<li>Manifest goal is invoked right after linker step for MSVC that support manifest file ( ie Visual Studio 2005 and 2008 )</li>
<li>Concurrent compilations are supported via <i>numberOfConcurrentCompilation</i> configuration.</li></ul>
<p>The following example use <i>generic-classic</i> with executable as <i>CC</i>. Note since we dont change the linker provider, it is will use the same name as the compiler provider name.</p>
<div>
<pre>
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
          ...
         &lt;configuration&gt;
           &lt;compilerProvider&gt;generic-classic&lt;/compilerProvider&gt;
           &lt;compilerExecutable&gt;CC&lt;/compilerExecutable&gt;
           ....         
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;
   </pre></div></div>
<div class="section">
<h3><a name="CompilerLinker_arguments"></a>Compiler/Linker arguments </h3>
<p>You can inject your specific compiler and linker arguments to the final compiler and linker command lines via:</p>
<ul>
<li>&lt;compilerStartOptions&gt;</li>
<li>&lt;compilerMiddleOptions&gt;</li>
<li>&lt;compilerEndOptions&gt;</li>
<li>&lt;linkerStartOptions&gt;</li>
<li>&lt;linkerMiddleOptions&gt;</li>
<li>&lt;linkerEndOptions&gt; </li></ul>
<p>Usually a pair of &lt;compilerStartOptions&gt; and &lt;linkerStartOptions&gt; should be sufficient.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2005&#x2013;2018
                        <a href="http://www.mojohaus.org">MojoHaus</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="https://www.ohloh.net/p/5211/widgets/project_thin_badge.js"></script>
    </div>
        </div>
    </footer>
        </body>
</html>